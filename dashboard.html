<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width,initial-scale=1,viewport-fit=cover"
  />
  <title>Master Control Center</title>
  <link rel="icon" type="image/svg+xml" href="assets/icon/stackdash.svg" />
  <link rel="icon" type="image/png" sizes="16x16" href="assets/icon/stackdash-16.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icon/stackdash-32.png" />
  <link rel="icon" type="image/png" sizes="128x128" id="faviconPng" href="assets/icon/stackdash-128.png" />
  <link rel="shortcut icon" href="assets/icon/stackdash-32.png" />
  <link rel="apple-touch-icon" sizes="128x128" href="assets/icon/stackdash-128.png" />
  <link rel="stylesheet" href="css/dashboard.css" />
</head>
<body>
  <div id="app" class="app">
<header class="topbar">
      <div class="topbar-title">
        <img class="logo" src="assets/icon/stackdash-128.png" alt="Master Control Center icon" />
        <span>Master Control Center</span>
      </div>
      <nav class="pages" id="pagesBar" aria-label="Pages"></nav>

      <div class="topbar-actions">
        <button class="btn small" data-action="addPage" title="Add page">Add Page</button>
        <button class="btn small" data-action="toggleSettings" title="Settings">Settings</button>
      </div>
    </header>

    <main class="content">
      <div id="groupsContainer" class="groups"></div>
    </main>

    <!-- Slide-out settings -->
        <aside id="settingsPanel" class="settings" aria-label="Settings">
          <div class="settings-header">
              <h2>Settings</h2>
              <button class="btn" data-action="toggleSettings" title="Close">Close</button>
          </div>
          <div class="settings-body">
            <!-- Tabs -->
            <div class="settings-tabs" role="tablist" aria-label="Settings Tabs">
              <button role="tab" id="tab-general"   data-tab="general"   aria-controls="panel-general"   aria-selected="true">General</button>
              <button role="tab" id="tab-data"      data-tab="data"      aria-controls="panel-data"      aria-selected="false">Data</button>
              <button role="tab" id="tab-api"       data-tab="api"       aria-controls="panel-api"       aria-selected="false">APIS</button>
              <button role="tab" id="tab-advanced"  data-tab="advanced"  aria-controls="panel-advanced"  aria-selected="false">Advanced</button>
              <button role="tab" id="tab-credits"   data-tab="credits"   aria-controls="panel-credits"   aria-selected="false">Credits</button>
            </div>

            <div class="tab-panels">
              <!-- General Tab -->
              <div id="panel-general" class="tab-panel active" role="tabpanel" aria-labelledby="tab-general">
                <section>
                  <h3>Theme</h3>
                  <div class="form-grid" style="grid-template-columns:140px 1fr; align-items:center;">
                    <label for="prefTheme">Theme</label>
                    <select id="prefTheme">
                      <option value="system">System</option>
                      <option value="light">Light</option>
                      <option value="dark">Dark</option>
                      <option value="crimson">Crimson Dark</option>
                    </select>
                    <label for="prefFont">Font</label>
                    <select id="prefFont"></select>
                  </div>
                  <div class="font-search-row" style="margin-top:8px;">
                    <input id="prefFontSearch" type="text" placeholder="Search fonts…" aria-label="Search fonts" />
                    <button id="prefFontTest" class="btn small" type="button" style="margin-left:8px;">Select Font</button>
                  </div>
                  <div class="glow-controls" style="display:flex;align-items:center;gap:20px;margin-top:14px;flex-wrap:wrap;">
                    <label class="switch" aria-label="Glow effect toggle" style="display:inline-flex;align-items:center;gap:8px;">
                      <input id="prefGlowEnabled" type="checkbox" checked />
                      <span class="switch-track" aria-hidden="true"></span>
                      <span class="switch-label-on" aria-hidden="true">On</span>
                      <span class="switch-label-off" aria-hidden="true">Off</span>
                    </label>
                    <label style="display:flex;align-items:center;gap:10px;">
                      <span style="font-weight:600;">Glow Color</span>
                      <input id="prefGlowColor" type="color" value="#8b1234" style="width:46px;height:32px;padding:0;border-radius:8px;border:1px solid var(--border);background:var(--panel);cursor:pointer;" aria-label="Glow color" />
                    </label>
                  </div>
                  <small class="muted">Choose light / dark or follow system preference.</small>
                  <div style="margin-top:10px;">
                    <button id="prefGlowReset" type="button" class="btn small" title="Reset glow color to default">Reset Glow</button>
                  </div>
                </section>
                <section>
                  <h3>Edit Mode</h3>
                  <div class="form-grid" style="grid-template-columns:auto;align-items:center;">
                    <label class="switch" style="justify-self:start;" aria-label="Edit toggle">
                      <input id="prefEditMode" type="checkbox" />
                      <span class="switch-track" aria-hidden="true"></span>
                      <span class="switch-label-on" aria-hidden="true">On</span>
                      <span class="switch-label-off" aria-hidden="true">Off</span>
                    </label>
                  </div>
                  <small class="muted">Turn off to hide menus, drag handles, and add buttons.</small>
                </section>
              </div>

              <!-- Data Tab -->
              <div id="panel-data" class="tab-panel" role="tabpanel" aria-labelledby="tab-data" hidden>
                <section>
                  <h3>Backup</h3>
                  <div class="row">
                    <button class="btn" data-action="exportJson">Export JSON</button>
                    <label class="btn file">
                      Import JSON
                      <input type="file" id="importJsonFile" accept="application/json" />
                    </label>
                  </div>
                </section>
              </div>

              <!-- API Tab -->
              <div id="panel-api" class="tab-panel" role="tabpanel" aria-labelledby="tab-api" hidden>
                <section>
                  <h3>logo.dev</h3>
                  <div class="form-grid">
                    <label for="prefLogoDevKey">API Key</label>
                    <input id="prefLogoDevKey" type="text" placeholder="sk_xxx..." autocomplete="off" />
                  </div>
                  <small class="muted">Stored locally. Used for automatic logo resolution when adding apps.</small>
                </section>
              </div>

              <!-- Advanced Tab -->
              <div id="panel-advanced" class="tab-panel" role="tabpanel" aria-labelledby="tab-advanced" hidden>
                <section>
                  <h3>Performance</h3>
                  <div class="form-grid" style="grid-template-columns:140px 1fr;align-items:center;">
                    <label for="prefPruneAge">Cache Max Age (hrs)</label>
                    <input id="prefPruneAge" type="number" min="1" max="48" step="1" placeholder="6" />
                    <label for="prefPruneEntries">Cache Max Entries</label>
                    <input id="prefPruneEntries" type="number" min="50" max="2000" step="50" placeholder="250" />
                    <label for="prefPerfPanel">Perf Panel</label>
                    <label class="switch" style="justify-self:start;">
                      <input id="prefPerfPanel" type="checkbox" />
                      <span class="switch-track" aria-hidden="true"></span>
                      <span class="switch-label-on" aria-hidden="true">On</span>
                      <span class="switch-label-off" aria-hidden="true">Off</span>
                    </label>
                  </div>
                  <small class="muted">Adjust in-memory cache pruning (weather, RSS, etc.). </small>
                </section>
                <section>
                  <h3>Danger ⚠️</h3>
                  <button class="btn danger" data-action="resetAll">Reset all data</button>
                </section>
              </div>

              <div id="panel-credits" class="tab-credits" role="tabpanel" aria-labelledby="tab-credits" hidden>
                <section>
                  <div class="credits-list" style="display: flex; flex-direction: column; gap: 15px;">
                    <div class="credit-item" style="display: flex; align-items: center; gap: 12px;">
                      <img src="https://cdn.discordapp.com/avatars/333686085106401281/a4e4ab5a699a39fdc5c17170df54a48f.webp?size=128"
                        alt="Contributor Avatar"
                        style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover; flex-shrink: 0;">
                      <div class="credit-info">
                        <span style="font-weight: 600;">Salc_RCC</span><br>
                        <a href="https://example.com" target="_blank" rel="noopener noreferrer">https://github.com/Salc-wm</a>
                        <small class="muted" style="margin-top: 6px; display: block;">Full Stack Senior.</small>
                      </div>
                    </div>
                   <div class="credit-item" style="display: flex; align-items: center; gap: 12px;">
                     <img src="https://cdn.discordapp.com/avatars/1237801313648246794/8bce95cb2d9f94195c34bef8b1f0acd9.webp?size=128"
                       alt="Contributor Avatar"
                       style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover; flex-shrink: 0;">
                     <div class="credit-info">
                       <span style="font-weight: 600;">Sergio Marquina</span><br>
                       <a href="https://anotherexample.dev" target="_blank" rel="noopener noreferrer">https://cybersecurity-solution.net/</a>
                       <small class="muted" style="margin-top: 6px; display: block;">Software Engineer & UX Designer.</small>
                     </div>
                   </div>
                   <div class="credit-item" style="display: flex; align-items: center; gap: 12px;">
                       <img src="https://cdn.discordapp.com/avatars/848850740592377887/0c3a5f28465d4b582480c8ce7489154c.webp?size=128"
                         alt="Contributor Avatar"
                          style="width: 36px; height: 36px; border-radius: 50%; object-fit: cover; flex-shrink: 0;">
                        <div class="credit-info">
                            <span style="font-weight: 600;">Folke™</span><br>
                          <small class="muted" style="margin-top: 6px; display: block;">Mental/Emotional support...</small>
                        </div>
                      </div>
                    </div>
                  <small class="muted" style="margin-top: 12px; display: block;">Thank you to all contributors who helped make this possible!</small>
                </section>
              </div>
            </div>
          </div>
        </aside>


    <!-- Modal -->
    <div id="modal" class="modal" hidden>
      <div class="modal-backdrop" data-action="closeModal"></div>
      <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-header">
          <h2 id="modalTitle">Modal</h2>
          <button class="btn close-btn" data-action="closeModal">Close</button>
        </div>
        <div class="modal-body" id="modalBody"></div>
        <div class="modal-footer" id="modalFooter"></div>
      </div>
    </div>

  </div>

  <script type="module" src="js/favicon.js" defer></script>
  <script type="module" src="js/main.js" defer></script>
</body>
</html>
